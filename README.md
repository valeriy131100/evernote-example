# evernote-example
Небольшой набор утилит для работы с Evernote API

# Установка
Вам понадобится установленный Python 3.6+ и git

Склонируйте репозиторий
```bash
$ git clone https://github.com/valeriy131100/evernote-example
```

Создайте в этой папке виртуальное окружение
```bash
$ python3 -m venv [полный путь до папки evernote-example]
```

Активируйте виртуальное окружение и установите зависимости
```bash
$ cd evernote-example
$ source bin/activate
$ pip install -r requirements.txt
```
# Использование
## Конфигурация перед использованием
Получите ключ доступа и токен к Evernote API. Ключ и "секрет" можно получить [здесь](https://dev.evernote.com/doc/), токен [здесь](https://dev.evernote.com/get-token/). Будьте внимательны, некоторые скрипты требуют ключ API с полным доступом.

GUID блокнотов можно узнать с помощью скрипта list_notebooks.py, для его использования переменные с GUID можно оставить пустыми. GUID заметки можно узнать в интерфейсе Evernote, скопировав ссылку на заметку
```html
https://www.evernote.com/shard/.../здесь_будет_guid_заметки?title=...
```

Заполните прилагающийся .env.example файл и переименуйте его в .env или иным образом задайте переменные среды:
* EVERNOTE_CONSUMER_KEY - ключ Evernote API
* EVERNOTE_CONSUMER_SECRET - "секрет" Evernote API
* EVERNOTE_PERSONAL_TOKEN - токен Everenote API
* JOURNAL_TEMPLATE_NOTE_GUID - guid заметки, которая будет использоваться как шаблон, для автоматической генерации заметок
* JOURNAL_NOTEBOOK_GUID - guid блокнота для автоматически генерируемых заметок
* INBOX_NOTEBOOK_GUID - guid блокнота Evernote, который является ящиком для входящих сообщений

## Описание скриптов
### list_notebooks.py
Выводит в консоль полный список ваших блокнотов Evernote.
### dump_inbox.py
Выводит в консоль содержимое блокнота INBOX_NOTEBOOK_GUID, являющегося ящиков для входящих сообщений. Количество получаемых заметок можно ограничить с помощью аргумента:
```bash
$ bin/python dump_inbox.py 50
```
Пример выше выведет не более 50 заметок.
### add_note2journal.py
Позволяет автоматически генерировать заметки на основе шаблона, задаваемого переменной JOURNAL_TEMPLATE_NOTE_GUID. Заметки будут генерироваться в блокноте JOURNAL_NOTEBOOK_GUID.

Содержимое и заголовок заметки полностью копируются, при этом в заголовке можно использовать автоматически подставляемые значения:
* {date} - заменяется на дату в формате ISO
* {dow} - заменяется на русскоязычное наименование дня недели

По умолчанию дата определяется с помощью системного времени. Если дату необходимо задать вручную, то это можно сделать с помощью аргумента:
```bash
$ bin/python add_note2journal.py 2000-01-01
```
В таком случае, для автоматической замены шаблонов в заголовке программа будет использовать дату 1 января 2000 года. Дата обязательно должна быть задана в формате YYYY-MM-DD.

По окончанию работы скрипт выведет название сгенерированной заметки.
### config.py
Данный файл содержит логику для работы с настройками программы.

